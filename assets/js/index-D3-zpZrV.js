(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function e(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=e(n);fetch(n.href,a)}})();const k=5,A=.1,o={OFF:1,TURNON:2,IGNITION:3,WORKING:4,STARTING_BOOST:5,WOKING_BOOST:6,STOPPING_BOOST:7};function T(i,t){var e=Math.atan2(i,t),s=e*(180/Math.PI);return s>180?s-=360:s<-180&&(s+=360),s}class O{constructor(t,e,s,n,a,h){this.acceleration=e,this.max_acceleration=t,this.max_speed=n,this.aerodinamics=a,this.current_speed=0,this.brakeforce=h,this.vertical_speed=0,this.horizontal_speed=0,this.current_height=0,this.current_horizontal_position=0,this.current_rocket_state=o.OFF,this.acceleration_power=s,this.current_rotation_angle=0,this.turn_power=1,this.current_acceleration_step=0,this.rotation_radians=0}TurnBoost(){switch(this.current_rocket_state){case o.WORKING:this.current_rocket_state=o.STARTING_BOOST;break;case o.STARTING_BOOST:this.current_rocket_state=o.WOKING_BOOST;break;case o.WOKING_BOOST:this.current_rocket_state=o.STOPPING_BOOST;break;case o.STOPPING_BOOST:this.current_rocket_state=o.WORKING;break}}NextStage(){switch(this.current_rocket_state){case o.OFF:this.current_rocket_state=o.IGNITION;break;case o.IGNITION:this.current_rocket_state=o.WORKING;break}}AdjustHeight(){this.current_height+this.vertical_speed>=0?this.current_height+=this.vertical_speed:(this.current_height=0,this.vertical_speed=0,this.current_acceleration_step=0),this.current_horizontal_position+=this.horizontal_speed,this.current_height<0&&(this.current_height=0)}Turn(t){switch(t){case 1:this.current_rotation_angle+=this.turn_power;break;case 0:this.current_rotation_angle-=this.turn_power;break}this.AdjustRotation()}AdjustAcceleration(t){this.current_acceleration_step=this.max_acceleration*t}AdjustRotation(){this.current_rotation_angle>180?this.current_rotation_angle-=360:this.current_rotation_angle<-180&&(this.current_rotation_angle+=360),this.rotation_radians=this.current_rotation_angle*Math.PI/180}ApplyResistence(){this.current_height>5&&(this.vertical_speed-=k*.2,this.horizontal_speed.toFixed()>=1&&(this.horizontal_speed-=A*Math.sin(this.rotation_radians)))}AdjustSpeed(){this.current_speed=this.max_speed*(this.current_acceleration_step/this.max_acceleration),this.AdjustRotation(),this.ApplyResistence()}Brake(){this.current_acceleration_step>this.brakeforce?this.current_acceleration_step-=this.brakeforce:this.current_acceleration_step=0}Accelerate(){document.getElementById("rocket").style.transition="0s",this.current_acceleration_step<this.max_acceleration-this.acceleration*this.aerodinamics?this.current_acceleration_step+=this.acceleration*this.aerodinamics:this.current_acceleration_step=this.max_acceleration,this.AdjustSpeed(),this.current_speed*Math.cos(this.rotation_radians),this.current_speed*Math.sin(this.rotation_radians),this.vertical_speed=Math.min(this.vertical_speed+this.acceleration_power*(this.current_acceleration_step/this.max_acceleration)*Math.cos(this.rotation_radians),this.max_speed),this.horizontal_speed=Math.min(this.horizontal_speed+this.acceleration_power*(this.current_acceleration_step/this.max_acceleration)*Math.sin(this.rotation_radians),this.max_speed)}Deaccelerate(){this.current_acceleration_step-this.acceleration/this.aerodinamics>0?this.current_acceleration_step-=this.acceleration/this.aerodinamics:this.current_acceleration_step=0,this.AdjustSpeed();const t=T(this.horizontal_speed,this.vertical_speed),e=.1;Math.abs(this.current_rotation_angle-t)>e?this.current_rotation_angle<t?this.current_rotation_angle+=e:this.current_rotation_angle-=e:this.current_rotation_angle=t,this.AdjustRotation()}SetVerticalSpeed(t){this.vertical_speed=t}SetHorizontalSpeed(t){this.vertical_speed=t}GetCurrentSpeed(){return this.current_speed}GetRotation(){return this.current_rotation_angle}GetVerticalSpeed(){return this.vertical_speed}GetCurrentAccelerationPercentage(){return this.current_acceleration_step/this.max_acceleration}GetMaxSpeed(){return this.max_speed}GetHorizontalSpeed(){return this.horizontal_speed}GetHeight(){return this.current_height}GetHorizontalPosition(){return this.current_horizontal_position}GetCurrentState(){return this.current_rocket_state}}class g{constructor(){this.currentSpriteIdx=0,this.rocketImg=document.getElementById("rocket_img"),this.lastUpdateTime=0}Animate(t,e,s,n=750){const a=Date.now();a-this.lastUpdateTime>=Math.min(e,n)&&(this.currentSpriteIdx++,this.currentSpriteIdx>s&&(this.currentSpriteIdx=0),this.lastUpdateTime=a),this.rocketImg.src=`.${t}/sprite_${this.currentSpriteIdx}.png`}}const y="/RocketGame/audio/Engine/engine_start.mp3",R="/RocketGame/audio/Engine/engine_launch_fit.mp3";function G(i){const e=(new Date().getTime()-i)/1e3;return parseFloat(e.toFixed(2))}function p(i,t){var e=new Audio(i);return e.volume=t,e.play(),e}class w extends g{constructor(){super(),this.audio=null,this.IgnitionAudio=null,this.currentSpriteIdx=0,this.startTime=0}play(){this.audio||(this.audio=p(y,1),this.startTime=new Date().getTime());let t=G(this.startTime);switch(t>=13&&super.Animate("/sprites/RocketStartup/Sprites/",100,28),t){case 12:this.IgnitionAudio||(this.IgnitionAudio=p(R,.7));break}return this.currentSpriteIdx>=28?(clearInterval(this.intervalFunction),this.intervalFunction=null,this.currentSpriteIdx=0,28):this.currentSpriteIdx}}const _="/RocketGame/audio/Engine/engine_working_fit.mp3";function f(i,t){var e=new Audio(i);return e.volume=t,e.play(),e}class x extends g{constructor(){super(),this.LastAcceleration=0,this.InitializedAcceleration=0,this.WorkingAudio=null,this.InitializedSlowDown=!1,this.InitializedAcceleration=!1}play(t){if(this.WorkingAudio?this.WorkingAudio.volume=Math.max(t,.1):this.WorkingAudio=f(_,1),this.LastAcceleration!=t&&(t&&!this.LastAcceleration&&(this.InitializedSlowDown?this.InitializedSlowDown=!1:this.currentSpriteIdx=0,this.InitializedAcceleration=!0),!t&&this.LastAcceleration&&(this.currentSpriteIdx>4&&(this.currentSpriteIdx=0),this.InitializedSlowDown=!0),this.LastAcceleration=t),this.InitializedSlowDown){this.WorkingAudio&&this.WorkingAudio.pause(),this.currentSpriteIdx==4&&(this.InitializedSlowDown=!1),super.Animate("/sprites/RocketTurning/RocketTurningOff/sprites",100,4);return}if(this.InitializedAcceleration){this.WorkingAudio&&this.WorkingAudio.play(),this.currentSpriteIdx==4&&(this.InitializedAcceleration=!1,SecondIgnitionAudio=null),super.Animate("/sprites/RocketTurning/RocketTurningOn/sprites",50,4);return}if(t){this.WorkingAudio==null&&(this.WorkingAudio=f(_,1)),this.WorkingAudio.addEventListener("timeupdate",function(){var s=.44;this.currentTime>this.duration-s&&(this.currentTime=0,this.play())}),this.currentSpriteIdx>=3&&(this.currentSpriteIdx=0);let e=10/t;super.Animate("/sprites/RocketWorking/Sprites",e,2,50)}}}class N{constructor(){this.StartupAnimation=new w,this.WorkingAnimation=new x}playIgnitionAnimation(){return this.StartupAnimation.play()}playTurnAnimation(){}playWorkingAnimation(t){this.WorkingAnimation.play(t)}}let l=document.getElementById("rocket"),b=document.getElementById("rocket_img"),v=l.offsetHeight;var r=new O(100,1,2,1e3,3,10);let d=new N(r);const S=document.getElementById("root").offsetWidth,I=document.getElementById("root").offsetHeight;function m(i,t,e,s){if(i>0){if(e+i<s-t)return!0}else if(e+i>=0)return!0;return!1}const u={OFF:1,TURNON:2,IGNITION:3,WORKING:4,STARTING_BOOST:5,WOKING_BOOST:6,STOPPING_BOOST:7};function W(i,t){return Math.floor(Math.random()*(t-i+1))+i}class B{constructor(t,e){this.X=t,this.Y=e,this.Roll=0,this.Accelerate=!1,this.Brake=!1,this.TurnDirection=2,this.CurrentSpriteIDX=0}RequestAdjustState(){switch(r.GetCurrentState()){case u.OFF:b.src="./sprites/RocketStartup/Sprites/sprite_0.png";break;case u.IGNITION:let t=d.playIgnitionAnimation();switch(t){case 28:return!0;case 24:r.SetVerticalSpeed(r.max_speed*.3);break}return r.AdjustAcceleration(t/28),!1}return!1}AdjustPosition(){if(l!=null){let t=-r.GetVerticalSpeed()/10,e=r.GetHorizontalSpeed()/10;m(t,l.offsetHeight,this.Y,I)&&(this.Y+=t),m(e,l.offsetWidth,this.X,S)&&(this.X+=e),r.GetHeight()>2&&(l.style.rotate=r.GetRotation()+"deg"),l.style.left=this.X+"px",l.style.top=this.Y+"px"}else console.log("null element!")}UpdateMovement(){switch(r.GetCurrentState()){case u.WORKING:d.playWorkingAnimation(r.current_acceleration_step/r.max_acceleration),this.RequestAdjustState(),this.TurnDirection!=2&&(r.Turn(this.TurnDirection),d.playTurnAnimation()),this.Accelerate?r.Accelerate():(r.Deaccelerate(),this.Brake&&r.Brake());break;case u.OFF:this.RequestAdjustState(),this.Accelerate&&r.NextStage();break;case u.IGNITION:this.RequestAdjustState()&&r.NextStage();break}this.AdjustPosition(),r.AdjustHeight()}ControlVelocimeter(t,e){let s=document.getElementById(t),n=Math.min(e*.85*2,170);e>=99&&(n+=W(-1,1)),s.style.rotate=n+"deg"}}var c=new B(S/2,I-v);function M(i,t){var e=Math.sqrt(Math.pow(i,2)+Math.pow(t,2));return e}function z(){let i=r.GetHeight()/40,t=-r.GetHorizontalPosition()/40;document.body.style.backgroundPositionY=i+"px",document.body.style.backgroundPositionX=t+"px";let e=r.GetCurrentAccelerationPercentage()*100,s=M(r.GetHorizontalSpeed(),r.GetVerticalSpeed())/r.GetMaxSpeed()*100;c.ControlVelocimeter("speed_neddle",s),document.getElementById("acceleration").style.height=e+"%",document.getElementById("speed").style.height=s+"%",c.UpdateMovement()}document.addEventListener("keydown",function(i){switch(i.key.toLowerCase()){case"w":c.Accelerate=!0;break;case"s":c.Brake=!0;break;case"a":c.TurnDirection=0;break;case"d":c.TurnDirection=1;break}});document.addEventListener("keyup",function(i){switch(i.key.toLowerCase()){case"w":c.Accelerate=!1;break;case"s":c.Brake=!1;break;case"a":case"d":c.TurnDirection=2;break}});setInterval(z,10);
